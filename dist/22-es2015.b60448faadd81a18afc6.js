(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{swwc:function(t,n,s){"use strict";s.r(n),s.d(n,"DoPollsModule",(function(){return N}));var e=s("sYmb"),o=s("TEn/"),i=s("tyNb"),l=s("ofXK"),c=s("3Pt+"),r=s("mrSG"),a=s("ec16"),b=s("kt0X"),d=s("F8ix"),u=s("vifI"),p=s("fXoL"),h=s("iHIt");const f=function(t){return{"selected-option":t}};function g(t,n){if(1&t){const t=p.Pb();p.Mb(0),p.Ob(1,"ion-item",7),p.Ob(2,"ion-text",8),p.Ob(3,"h1"),p.mc(4),p.Nb(),p.Nb(),p.Nb(),p.Ob(5,"ion-item",9),p.Ob(6,"ion-icon",10),p.Wb("click",(function(){p.ic(t);const s=n.index;return p.Yb(2).addAnswer(s,1)})),p.Nb(),p.Ob(7,"ion-icon",11),p.Wb("click",(function(){p.ic(t);const s=n.index;return p.Yb(2).addAnswer(s,2)})),p.Nb(),p.Ob(8,"ion-icon",12),p.Wb("click",(function(){p.ic(t);const s=n.index;return p.Yb(2).addAnswer(s,3)})),p.Nb(),p.Nb(),p.Lb()}if(2&t){const t=n.$implicit,s=n.index,e=p.Yb(2);p.zb(4),p.nc(t),p.zb(2),p.dc("ngClass",p.gc(4,f,1===e.pollAnswer[s])),p.zb(1),p.dc("ngClass",p.gc(6,f,e.pollAnswer[s]&&2===e.pollAnswer[s])),p.zb(1),p.dc("ngClass",p.gc(8,f,e.pollAnswer[s]&&3===e.pollAnswer[s]))}}function w(t,n){if(1&t){const t=p.Pb();p.Ob(0,"ion-content",4),p.Ob(1,"ion-list"),p.lc(2,g,9,10,"ng-container",5),p.Nb(),p.Ob(3,"ion-button",6),p.Wb("click",(function(){return p.ic(t),p.Yb().sendAnswer()})),p.mc(4),p.Zb(5,"translate"),p.Nb(),p.Nb()}if(2&t){const t=p.Yb();p.dc("fullscreen",!0),p.zb(2),p.dc("ngForOf",t.pollData.questions),p.zb(1),p.dc("disabled",t.getFullAnswer()),p.zb(1),p.oc(" ",p.ac(5,4,"commons.send")," ")}}let m=(()=>{class t extends a.a{constructor(t,n,s,e,o,i,l){super(e,o,i),this.formBuilder=t,this.router=n,this.toastController=s,this.store=e,this.utils=o,this.translateService=i,this.activatedRoute=l,this.pollId="",this.pollAnswer=[]}navigateToPoll(t){this.store.dispatch(new u.d({_id:t._id}))}addAnswer(t,n){this.pollAnswer[t]=n}getFullAnswer(){let t=!0;if(this.pollData&&this.pollData.questions&&this.pollAnswer.length===this.pollData.questions.length){t=!1;for(const n of this.pollAnswer)n||(t=!0)}return t}sendAnswer(){const t={_id:this.pollId,pollName:this.pollData.pollName||null,groupPoll:this.pollData.groupPoll||null,questions:this.pollData.questions||null,owner:this.pollData.owner||null,answers:{user:JSON.parse(sessionStorage.user).email||null,answersData:this.pollAnswer}};this.store.dispatch(new u.g(t))}getPolls(){const t={user:JSON.parse(sessionStorage.user).email};this.store.dispatch(new u.f(t))}presentToast(){return Object(r.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:this.translateService.instant("doPolls.pollCreated"),duration:2e3})).present()}))}ngOnInit(){this.store.pipe(Object(b.p)(d.a)).subscribe(t=>{Array.isArray(t)&&(this.pollData=t[0])}),this.activatedRoute.url.subscribe(t=>{const n=this.router.getCurrentNavigation().extras.state;n&&n.data&&(this.pollId=n.data._id,this.store.dispatch(new u.d({_id:n.data._id})))})}}return t.\u0275fac=function(n){return new(n||t)(p.Jb(c.a),p.Jb(i.g),p.Jb(o.I),p.Jb(b.h),p.Jb(h.a),p.Jb(e.d),p.Jb(i.a))},t.\u0275cmp=p.Db({type:t,selectors:[["app-do-poll"]],features:[p.wb],decls:8,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/principal-menu"],["class","poll-container",3,"fullscreen",4,"ngIf"],[1,"poll-container",3,"fullscreen"],[4,"ngFor","ngForOf"],["expand","block",3,"disabled","click"],["lines","none"],["color","primary","expand","block"],[1,"icon-container"],["src","./assets/custom-icons/sad.svg",3,"ngClass","click"],["src","./assets/custom-icons/nosense.svg",3,"ngClass","click"],["src","./assets/custom-icons/happy.svg",3,"ngClass","click"]],template:function(t,n){1&t&&(p.Ob(0,"ion-header",0),p.Ob(1,"ion-toolbar"),p.Ob(2,"ion-buttons",1),p.Kb(3,"ion-back-button",2),p.Ob(4,"ion-title"),p.mc(5),p.Zb(6,"translate"),p.Nb(),p.Nb(),p.Nb(),p.Nb(),p.lc(7,w,6,6,"ion-content",3)),2&t&&(p.dc("translucent",!0),p.zb(5),p.oc(" ",p.ac(6,3,"viewPoll.doPoll")," "),p.zb(2),p.dc("ngIf",n.pollData))},directives:[o.l,o.B,o.f,o.c,o.d,o.A,l.j,o.j,o.q,l.i,o.e,o.o,o.z,o.m,l.h],pipes:[e.c],styles:[".poll-container[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:30%;font-size:5em;margin-right:3%}.poll-container[_ngcontent-%COMP%]   .selected-option[_ngcontent-%COMP%]{width:1em;height:1em;border-radius:50%;background:#5cb85c}"]}),t})();const O=[{path:"",component:m}];let A=(()=>{class t{}return t.\u0275mod=p.Hb({type:t}),t.\u0275inj=p.Gb({factory:function(n){return new(n||t)},imports:[[i.k.forChild(O)],i.k]}),t})(),N=(()=>{class t{}return t.\u0275mod=p.Hb({type:t}),t.\u0275inj=p.Gb({factory:function(n){return new(n||t)},imports:[[o.C,l.b,c.d,c.i,i.k.forChild([{path:"",component:m}]),A,e.b]]}),t})()}}]);